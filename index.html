<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tactical Battle Board</title>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
      }
    </script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="panel header">
        <div class="title">Tactical Battle Board</div>
        <div class="tag">In-memory Â· Text-driven</div>
      </header>

      <section class="panel console-panel">
        <h3 class="section-title">Battle Language</h3>
        <textarea id="script-input" class="console" spellcheck="false"></textarea>
        <div class="actions">
          <button id="run-btn">Run Script</button>
          <button id="clear-btn">Clear Tokens</button>
        </div>
        <div class="bg-controls">
          <div class="field">
            <label for="bg-url">Background URL</label>
            <input id="bg-url" type="text" placeholder="https://... or images/wight-battle.png" list="bg-suggestions" />
            <datalist id="bg-suggestions">
              <option value="images/wight-battle.png"></option>
            </datalist>
            <button id="bg-url-btn">Set Background</button>
          </div>
          <div class="field">
            <label for="bg-file">Upload Image</label>
            <input id="bg-file" type="file" accept="image/*" />
          </div>
          <div class="field">
            <label>View</label>
            <label><input type="radio" name="view-mode" value="2d" checked /> 2D</label>
            <label><input type="radio" name="view-mode" value="3d" /> 3D</label>
          </div>
          <div class="field cam-buttons">
            <label>Cameras</label>
            <button data-cam="top">Top</button>
            <button data-cam="nw">NW</button>
            <button data-cam="ne">NE</button>
            <button data-cam="sw">SW</button>
            <button data-cam="se">SE</button>
          </div>
          <div class="field slider-field">
            <label for="heat-height">Heat height</label>
            <input id="heat-height" type="range" min="1" max="6" step="0.2" value="3" />
            <span class="slider-value" id="heat-height-value">3.0x</span>
          </div>
          <div class="field slider-field">
            <label for="mesh-radius">Mesh spread</label>
            <input id="mesh-radius" type="range" min="0.6" max="1.5" step="0.05" value="1" />
            <span class="slider-value" id="mesh-radius-value">1.00</span>
          </div>
        </div>
      </section>

      <section class="panel map-panel">
        <canvas id="map-canvas"></canvas>
      </section>

      <section class="panel log-panel">
        <h3 class="section-title">Log</h3>
        <div id="log"></div>
      </section>
    </main>

    <script type="module" src="app.js"></script>
  </body>
</html>
