<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tactical Battle Board</title>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
      }
    </script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="panel header">
        <div class="title">Tactical Battle Board</div>
        <div class="tag">In-memory Â· Text-driven</div>
      </header>

      <section class="panel console-panel">
        <h3 class="section-title">Battle Language</h3>
        <div class="field">
          <label for="script-picker">Scripts</label>
          <label class="debug-toggle"><input type="checkbox" id="show-debug" /> Show debug scripts</label>
          <select id="script-picker">
            <option value="scripts/hex-demo.txt">Hex Demo</option>
            <option value="scripts/grid-demo.txt">Grid Demo</option>
          </select>
          <div class="current-map-label">Current map: <span id="current-map-label">None</span></div>
        </div>
        <textarea id="script-input" class="console" spellcheck="false"></textarea>
        <div class="actions">
          <button id="run-btn">Run Script</button>
          <button id="clear-btn">Clear Tokens</button>
          <button id="log-open">Open Log</button>
          <button id="db-open">Open DB</button>
        </div>
        <div class="bg-controls">
          <div class="field cam-buttons">
            <label>Cameras</label>
            <button data-cam-slot="1">View 1</button>
            <button data-cam-slot="2">View 2</button>
            <button data-cam-slot="3">View 3</button>
            <button data-cam-slot="4">View 4</button>
            <button data-cam-slot="5">View 5</button>
            <button data-cam-slot="6">View 6</button>
            <button id="clear-cam-views">Clear Views</button>
          </div>
          <div class="field slider-field">
            <label for="heat-height">Heat height</label>
            <input id="heat-height" type="range" min="1" max="6" step="0.2" value="3" />
            <span class="slider-value" id="heat-height-value">3.0x</span>
          </div>
          <div class="field">
            <label><input type="checkbox" id="arena-grid" /> Show XYZ arena grid</label>
          </div>
          <div class="field">
            <label><input type="checkbox" id="show-texture" checked /> Show texture map</label>
          </div>
          <div class="field">
            <label><input type="checkbox" id="show-height" checked /> Show height map</label>
          </div>
          <div class="field">
            <label><input type="checkbox" id="show-overlay-grid" checked /> Show overlay grid/hex</label>
          </div>
          <div class="field">
            <label><input type="checkbox" id="show-overlay-labels" checked /> Show grid refs (A0...)</label>
          </div>
        </div>
      </section>

      <div id="sidebar-resizer" class="divider" aria-label="Resize sidebar"></div>

      <section class="panel map-panel">
        <canvas id="map-canvas"></canvas>
      </section>

    </main>

    <div id="log-window" class="log-window">
      <div class="log-window-header">
        <span>Log</span>
        <div class="log-actions">
          <button id="log-clear">Clear</button>
          <button id="log-copy">Copy</button>
        </div>
        <button id="log-close">Close</button>
      </div>
      <div id="log" class="log-body"></div>
    </div>

    <div id="db-window" class="db-window">
      <div class="db-window-header">
        <span>Local Storage</span>
        <button id="db-close">Close</button>
      </div>
      <div id="db-body" class="db-body"></div>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
